# Flatpak

The [OpenMadoola Flatpak](https://flathub.org/apps/com.infochunk.OpenMadoola) has a few differences from the standard binary due to sandboxing.

## Data files

All redistributable data files from this repo are bundled with the Flatpak, similar to the Windows builds. When you run the OpenMadoola Flatpak for the first time, a script will walk you through loading your Wing of Madoola game ROM data.

All files generated by you playing the game (saves, configuration information, etc.) are stored at `~/.var/app/com.infochunk.OpenMadoola/data/openmadoola/`.

## Steam Deck

Make sure you run OpenMadoola in desktop mode at least once before running it in gaming mode. On first launch, OpenMadoola will open a pop-up file chooser so you can load your game data. This process does not work properly in the single-tasking Gamescope window manager used by gaming mode. After you have your game data loaded, OpenMadoola will work fine in gaming mode.

## MML compiler

Due to sandboxing, you can only play MML files that are in `~/.var/app/com.infochunk.OpenMadoola/data/openmadoola/`. If you're working on an MML file and want to use the standalone player, copy the file into that directory, then open a terminal there. You can play the MML file by running `flatpak run com.infochunk.OpenMadoola -p file.mml`. If you're interested in overriding in-game music or sounds with your MML file, create the directory `~/.var/app/com.infochunk.OpenMadoola/data/openmadoola/mml` and then copy your files inside that directory following the names [here](https://github.com/nfroggy/openmadoola/blob/master/src/sound.c) (search for "soundFilenames").
